@using System.Globalization
@using BlazorCrudDemo.Web.Models

<div class="stat-card @(IsHighlighted ? "highlight" : "") @(TrendDirection == TrendDirection.Up ? "trend-up" : "trend-down")">
    <div class="stat-icon">
        <i class="@Icon"></i>
    </div>
    <div class="stat-content">
        <div class="stat-value">@Value.ToString("N0", CultureInfo.InvariantCulture)</div>
        <div class="stat-title">@Title</div>
    </div>
    @if (ShowTrend)
    {
        <div class="stat-trend">
            <i class="@(TrendDirection == TrendDirection.Up ? "fas fa-arrow-up" : "fas fa-arrow-down") me-1"></i>
            <span>@($"{TrendValue}%")
                @if (TrendPeriod.HasValue)
                {
                    <span class="trend-period">@(TrendPeriod == 1 ? "vs yesterday" : $"last {TrendPeriod} days")</span>
                }
            </span>
        </div>
    }
</div>

<style>
    .stat-card {
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
        position: relative;
        overflow: hidden;
        border: 1px solid #e2e8f0;
    }

        .stat-card.highlight {
            border-left: 4px solid #1e3a8a;
            background: #f8fafc;
        }

        .stat-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-color: #1e3a8a;
        }

    .stat-icon {
        position: absolute;
        top: 1rem;
        right: 1rem;
        font-size: 2rem;
        opacity: 0.1;
        color: #1e3a8a;
    }

    .stat-content {
        margin-bottom: 0.5rem;
    }

    .stat-value {
        font-size: 1.875rem;
        font-weight: 700;
        color: #0f172a;
        line-height: 1.2;
    }

    .stat-title {
        color: #475569;
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }

    .stat-trend {
        display: flex;
        align-items: center;
        font-size: 0.875rem;
        margin-top: 0.5rem;
    }

    .trend-up {
        color: #059669;
    }

    .trend-down {
        color: #dc2626;
    }

    .trend-period {
        font-size: 0.75rem;
        color: #94a3b8;
        margin-left: 0.25rem;
    }
</style>

@code {
    [Parameter] public string Title { get; set; } = string.Empty;
    [Parameter] public decimal Value { get; set; }
    [Parameter] public string Icon { get; set; } = "fas fa-chart-line";
    [Parameter] public bool ShowTrend { get; set; } = false;
    [Parameter] public bool IsHighlighted { get; set; } = false;
    [Parameter] public TrendDirection TrendDirection { get; set; } = TrendDirection.Up;
    [Parameter] public decimal TrendValue { get; set; }
    [Parameter] public int? TrendPeriod { get; set; } = 30;
}
